(()=>{"use strict";var e={d:(n,i)=>{for(var t in i)e.o(i,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:i[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const i=require("@babel/core"),t=(0,i.template)("\n  module.exports = function __injector(__injections) {\n    __injections = __injections || {};\n\n    (function __validateInjection() {\n      var validDependencies = DEPENDENCIES;\n      var injectedDependencies = Object.keys(__injections);\n      var invalidInjectedDependencies = injectedDependencies.filter(function (dependency) {\n        return validDependencies.indexOf(dependency) === -1;\n      });\n\n      if (invalidInjectedDependencies.length > 0) {\n        var validDependenciesString = ' - ' + validDependencies.join('\\n - ');\n        var injectedDependenciesString = ' - ' + injectedDependencies.join('\\n - ');\n        var invalidDependenciesString = ' - ' + invalidInjectedDependencies.join('\\n - ');\n\n        throw new Error('Injection Error in ' + SOURCE_PATH + '\\n\\n' +\n          'The following injections are invalid:\\n' + invalidDependenciesString + '\\n\\n' +\n          'The following injections were passed in:\\n' + injectedDependenciesString + '\\n\\n' +\n          'Valid injection targets for this module are:\\n' + validDependenciesString + '\\n'\n        );\n      }\n    })();\n\n    __injector.sourcePath = SOURCE_PATH;\n    __injector.validDependencies = DEPENDENCIES;\n\n    var module = { exports: {} };\n    var exports = module.exports;\n\n    (function () {\n      SOURCE\n    })();\n\n    return module.exports;\n  }\n"),r=(0,i.template)("\n    export default function __injector(__injections) {\n        __injections = __injections || {};\n\n        (function __validateInjection() {\n        var validDependencies = DEPENDENCIES;\n        var injectedDependencies = Object.keys(__injections);\n        var invalidInjectedDependencies = injectedDependencies.filter(function (dependency) {\n            return validDependencies.indexOf(dependency) === -1;\n        });\n\n        if (invalidInjectedDependencies.length > 0) {\n            var validDependenciesString = ' - ' + validDependencies.join('\\n - ');\n            var injectedDependenciesString = ' - ' + injectedDependencies.join('\\n - ');\n            var invalidDependenciesString = ' - ' + invalidInjectedDependencies.join('\\n - ');\n\n            throw new Error('Injection Error in ' + SOURCE_PATH + '\\n\\n' +\n            'The following injections are invalid:\\n' + invalidDependenciesString + '\\n\\n' +\n            'The following injections were passed in:\\n' + injectedDependenciesString + '\\n\\n' +\n            'Valid injection targets for this module are:\\n' + validDependenciesString + '\\n'\n            );\n        }\n        })();\n\n        __injector.sourcePath = SOURCE_PATH;\n        __injector.validDependencies = DEPENDENCIES;\n\n        var module = { exports: {} };\n        var exports = module.exports;\n\n        (function () {\n        SOURCE\n        })();\n\n        if (module.exports.hasOwnProperty('default') && Object.keys(module.exports).length === 1) {\n            module.exports = module.exports.default;\n        }\n\n        return module.exports;\n    }\n",{sourceType:"module"});function s(e,n){return i.types.expressionStatement(i.types.assignmentExpression("=",i.types.memberExpression(i.types.memberExpression(i.types.identifier("module"),i.types.identifier("exports"),!1),e,!1),n))}function o(e,n){this.cacheable&&this.cacheable();const o=function(e,n,o){const p=(0,i.transformSync)(n,{ast:!0,code:!1,compact:!1,filename:e.resourcePath}).ast,a=[],c=[];let d=!1;(0,i.traverse)(p,{CallExpression(e){i.types.isIdentifier(e.node.callee,{name:"require"})?(a.push(function(e){const n=e.node.arguments[0].value;return e.replaceWith(i.types.expressionStatement(i.types.conditionalExpression(i.types.callExpression(i.types.memberExpression(i.types.identifier("__injections"),i.types.identifier("hasOwnProperty"),!1),[i.types.stringLiteral(n)]),i.types.memberExpression(i.types.identifier("__injections"),i.types.stringLiteral(n),!0),e.node))),n}(e)),e.skip()):i.types.isImport(e.node.callee)&&(a.push(function(e){const n=e.node.arguments[0].value;return e.replaceWith(i.types.expressionStatement(i.types.conditionalExpression(i.types.callExpression(i.types.memberExpression(i.types.identifier("__injections"),i.types.identifier("hasOwnProperty"),!1),[i.types.stringLiteral(n)]),i.types.callExpression(i.types.memberExpression(i.types.identifier("Promise"),i.types.identifier("resolve"),!1),[i.types.memberExpression(i.types.identifier("__injections"),i.types.stringLiteral(n),!0)]),e.node))),n}(e)),e.skip())},ImportDeclaration(e){d=!0;const n=function(e){const n=e.node,t=n.source.value,r=[],s=n.specifiers.map((e=>{const n=e.local,s=e.imported,o=i.types.identifier(`__${n.name}`);let p=i.types.memberExpression(i.types.identifier("__injections"),i.types.stringLiteral(t),!0);return"ImportSpecifier"===e.type&&(p=i.types.memberExpression(p,s)),r.push(i.types.variableDeclaration("var",[i.types.variableDeclarator(n,i.types.conditionalExpression(i.types.callExpression(i.types.memberExpression(i.types.identifier("__injections"),i.types.identifier("hasOwnProperty"),!1),[i.types.stringLiteral(t)]),p,o))])),e.local=o,e})),o=i.types.importDeclaration(s,n.source);return e.replaceWithMultiple(r),{node:o,dependencyString:t}}(e),t=n.node,r=n.dependencyString;c.push(t),a.push(r),e.skip()},ExportDefaultDeclaration(e){d=!0,function(e){let n;const t=e.node.declaration;n="FunctionDeclaration"===t.type?s(i.types.identifier("default"),i.types.functionExpression(t.id,t.params,t.body,t.generator,t.async)):s(i.types.identifier("default"),e.node.declaration),e.replaceWith(n)}(e),e.skip()},ExportNamedDeclaration(e){d=!0,function(e){let n=[];const i=e.node.declaration;i?(n.push(i),Array.isArray(i.declarations)?i.declarations.forEach((e=>{let i=!1;e.init&&e.init.type.endsWith("Literal")&&(i=!0),n.push(s(e.id,i?e.init:e.id))})):n.push(s(i.id,i.id))):n=e.node.specifiers.map((e=>s(e.exported,e.local))),e.replaceWithMultiple(n)}(e),e.skip()}}),0===a.length&&e.emitWarning("The module you are trying to inject into doesn't have any dependencies. Are you sure you want to do this?");const l=d?r:t,u=i.types.file(i.types.program([...c,l({SOURCE:p.program.body,SOURCE_PATH:i.types.stringLiteral(e.resourcePath),DEPENDENCIES:i.types.arrayExpression(a.map((e=>i.types.stringLiteral(e))))})]),[]);return(0,i.transformFromAstSync)(u,n,{sourceMaps:e.sourceMap,sourceFileName:e.resourcePath,inputSourceMap:o||void 0,babelrc:!1,compact:!1,configFile:!1,filename:e.resourcePath})}(this,e,n),p=o.code,a=o.map;this.callback(null,p,a)}var p=exports;for(var a in n)p[a]=n[a];n.__esModule&&Object.defineProperty(p,"__esModule",{value:!0})})();
//# sourceMappingURL=index.js.map